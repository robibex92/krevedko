import { PrismaClient } from "@prisma/client";

const prisma = new PrismaClient();

async function initSiteContent() {
  try {
    console.log("Инициализация контента сайта...");

    // Создаем контент "О нас"
    await prisma.siteContent.upsert({
      where: { key: "about" },
      update: {},
      create: {
        key: "about",
        title: "О нас",
        content: `Мы — команда «Ля Креведко», объединяющая поставщиков фермерских
продуктов, владельцев локальных производств и клиентов, которые
ценят свежесть и честный состав.

Каждую неделю мы собираем предзаказы, выезжаем к нашим партнёрам и
доставляем вам продукты напрямую, минуя длительные цепочки
поставок.

• Только проверенные производители и личное общение с каждым;
• Прозрачные цены без скрытых наценок и посредников;
• Гибкие периоды заказов и возможность оформить доставку заранее.`,
      },
    });

    // Создаем контент "Контакты"
    await prisma.siteContent.upsert({
      where: { key: "contacts" },
      update: {},
      create: {
        key: "contacts",
        title: "Контакты",
        content: `Мы всегда на связи. Задавайте вопросы и отправляйте пожелания
любым удобным способом.

Телефон: +7 999 000-00-00
Email: hello@lya-krevedko.ru
Telegram: @lya_krevedko

Мы находимся в г. Новосибирск, ул. Тайгинская, 37, но доставляем
заказы и по области.`,
      },
    });

    // Создаем FAQ элементы
    const faqItems = [
      {
        question: "Как оформить заказ?",
        answer:
          "Выберите товары в каталоге, добавьте их в корзину и нажмите «Оформить заказ». Выберите подходящий период сбора заказов. После подтверждения заказа вы получите уведомление на email и в Telegram (если подключен).",
        order: 1,
      },
      {
        question: "Когда нужно оплатить заказ?",
        answer:
          "Оплата производится после подтверждения наличия товаров. Вы получите уведомление с реквизитами для оплаты и сможете загрузить квитанцию об оплате прямо в личном кабинете.",
        order: 2,
      },
      {
        question: "Можно ли изменить или отменить заказ?",
        answer:
          "Да! В течение активного периода сбора заказов вы можете изменить количество товаров в корзине или отменить заказ полностью. После окончания периода изменения возможны только через обращение к администратору.",
        order: 3,
      },
      {
        question: "Как работает доставка?",
        answer:
          "Доставка доступна при заказе от 3000 ₽ в пределах Новосибирска и области. Для заказов на меньшую сумму доступен самовывоз из наших точек выдачи. Стоимость доставки рассчитывается индивидуально.",
        order: 4,
      },
      {
        question: "Что такое периоды сбора заказов?",
        answer:
          "Мы работаем по системе предзаказов. Каждую неделю открывается новый период сбора заказов, в течение которого вы можете оформить заказ. После закрытия периода мы формируем закупки у поставщиков и доставляем товары.",
        order: 5,
      },
      {
        question: "Какие преимущества у зарегистрированных пользователей?",
        answer:
          "Зарегистрированные пользователи получают историю заказов, могут отслеживать статус доставки, получать уведомления о новых товарах и специальных предложениях.",
        order: 6,
      },
    ];

    for (const faqItem of faqItems) {
      await prisma.fAQItem.create({
        data: faqItem,
      });
    }

    console.log("✅ Контент сайта успешно инициализирован!");
    console.log("📄 Создано:");
    console.log('  - Контент "О нас"');
    console.log('  - Контент "Контакты"');
    console.log(`  - ${faqItems.length} FAQ элементов`);
  } catch (error) {
    console.error("❌ Ошибка при инициализации контента:", error);
    throw error;
  } finally {
    await prisma.$disconnect();
  }
}

// Запускаем инициализацию
initSiteContent()
  .then(() => {
    console.log("🎉 Инициализация завершена успешно!");
    process.exit(0);
  })
  .catch((error) => {
    console.error("💥 Ошибка инициализации:", error);
    process.exit(1);
  });

export { initSiteContent };

